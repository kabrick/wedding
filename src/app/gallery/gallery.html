<section class="gallery-hero">
  <div class="container">
    <h1>Our Story in Pictures</h1>
    <p class="subtitle">Moments from our journey together and our beautiful wedding day</p>
  </div>
</section>

<section class="gallery-section">
  <div class="container">
    
    <!-- Category Filter -->
    <div class="category-filters">
      <button
                class="filter-btn"
                [class.active]="activeCategory() === 'kukyala'"
                (click)="setCategory('kukyala')">
            Kukyala
        </button>
        <button
                class="filter-btn"
                [class.active]="activeCategory() === 'engagement'"
                (click)="setCategory('engagement')">
            Engagement
        </button>
      <button 
        class="filter-btn" 
        [class.active]="activeCategory() === 'pre_shoot'"
        (click)="setCategory('pre_shoot')">
        Pre-Shoot
      </button>
      <button 
        class="filter-btn" 
        [class.active]="activeCategory() === 'introduction'"
        (click)="setCategory('introduction')">
        Introduction
      </button>
        <button
                class="filter-btn"
                [class.active]="activeCategory() === 'church'"
                (click)="setCategory('church')">
            Ceremony
        </button>
        <button
                class="filter-btn"
                [class.active]="activeCategory() === 'reception'"
                (click)="setCategory('reception')">
            Reception
        </button>
    </div>

    <!-- Photo Grid -->
    <div class="photo-grid">
      @for (photo of filteredPhotos(); track photo.id) {
        <div class="photo-item" (click)="openLightbox(photo)">
          <div class="photo-container">
            <img 
              [src]="photo.thumbnail" 
              [alt]="photo.category"
              loading="lazy"
            />
            <div class="photo-overlay">
              <div class="photo-info">
                <span class="photo-category">{{ photo.category | titlecase }}</span>
              </div>
            </div>
          </div>
        </div>
      }
    </div>

    <!-- Load More Button -->
    @if (hasMorePhotos(activeCategory())) {
      <div class="load-more-section">
        <button 
          class="btn-load-more" 
          (click)="loadMorePhotos(activeCategory())">
          Load More Photos ({{ getRemainingPhotoCount(activeCategory()) }} remaining)
        </button>
      </div>
    }

    <!-- Empty State -->
    @if (filteredPhotos().length === 0) {
      <div class="empty-state">
        <div class="empty-icon">ðŸ“¸</div>
        <h3>No photos yet</h3>
        <p>Photos for this category will be added soon!</p>
      </div>
    }
  </div>
</section>

<!-- Lightbox Modal -->
@if (lightboxPhoto()) {
  <div class="lightbox-overlay" (click)="closeLightbox()" (keydown.escape)="closeLightbox()">
    <div class="lightbox-container" (click)="$event.stopPropagation()">
      <button class="lightbox-close" (click)="closeLightbox()" aria-label="Close">Ã—</button>
      
      @if (hasPreviousPhoto()) {
        <button class="lightbox-nav prev" (click)="previousPhoto()" aria-label="Previous">â€¹</button>
      }
      @if (hasNextPhoto()) {
        <button class="lightbox-nav next" (click)="nextPhoto()" aria-label="Next">â€º</button>
      }
      
      <div class="lightbox-content">
        <img 
          [src]="lightboxPhoto()!.fullSize" 
          [alt]="lightboxPhoto()!.category"
          class="lightbox-image"
        />
        <div class="lightbox-info">
          <span class="lightbox-category">{{ lightboxPhoto()!.category | titlecase }}</span>
        </div>
      </div>
    </div>
  </div>
}